# With
파이썬에서는 파일을 열고, 코드를 실행하고, 닫아야 합니다. 닫지 않으면 파일에 이상이 생길 수 있어서 꼭 close() 메서드를 사용해야합니다. 때로는 close() 메서드를 계속 사용하기 귀찮을 때가 있습니다.

파이썬에서는 그래서 더 효율적이고 편한 방법을 개발자들에게 제공하였습니다. 바로 "with"라는 키워드를 사용하여 파일을 자동으로 닫는 방법입니다. Wit를 사용하면 파일을 닫을 필요가 없습니다. 왜냐하면 파이썬이 자동으로 하기 때문입니다.

밑에 있는 코드의 형식을 컨텍스트 매니저라고 합니다.
```
with open("example.txt", "w") as mainFile:
  mainFile.write("testing123")
```

# `__enter__`와 `__exit__`
With 키워드를 사용하여 쉽게 파일을 여는 것이 가능합니다.

```
with open("a.txt", "w") as mf:
  mf.write("Hello World")
```

위의 코드는 다음 코드와 같습니다.

```
mf = open("a.txt", "w")
try:
  mf.write("Hello World")
finally:
  mf.close()
```

저희만의 콘켁스트 매니저라고 with에서 open() 대신 사용할 수 있는 클래스를 만듭 수 있습니다.

```
class fileManager:
  def __init__(self, fileName):
    self.fileName = fileName

  def __enter__(self):
    self.file = open(self.name, "w", encoding = "UTF-8")
    return self.file

  def __exit__(self, type, value, tb):
    if self.file:
      self.file.close()

with fileManager("hello.txt") as mf:
  mf.write("Hello World")
```

먼저, `__enter__()`는 파일을 여는 과정인 함수이고 꼭 파일을 돌려 줘야 합니다. `__exit__()`는 작업이 끝난 후 실행할 코드입니다. exit에서 꼭 파일을 닫으세요.
